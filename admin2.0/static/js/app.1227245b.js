(function(e){function t(t){for(var n,s,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},o=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0cb8":function(e,t,r){"use strict";r("d260")},"0d87":function(e,t,r){},1487:function(e,t,r){"use strict";r("96e2")},"1a85":function(e,t,r){},"1d83":function(e,t,r){"use strict";r("1a85")},4661:function(e,t,r){"use strict";r("7f66")},"56d7":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("be4f"),r("450d");var n=r("896a"),a=r.n(n),o=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("2b0e")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},i=[],l={name:"app"},c=l,u=r("2877"),d=Object(u["a"])(c,s,i,!1,null,null,null),p=d.exports,m=r("8c4f"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login_container"},[r("div",{staticClass:"login_box"},[e._m(0),r("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{model:e.loginForm,rules:e.loginFormRules,"label-width":"0px"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user"},model:{value:e.loginForm.name,callback:function(t){e.$set(e.loginForm,"name",t)},expression:"loginForm.name"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password"},model:{value:e.loginForm.pwd,callback:function(t){e.$set(e.loginForm,"pwd",t)},expression:"loginForm.pwd"}})],1),r("el-form-item",{staticClass:"btns"},[r("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("Login")]),r("el-button",{attrs:{type:"info"},on:{click:e.resetLoginForm}},[e._v("Reset")])],1)],1)],1)])},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"avatar_box"},[n("img",{attrs:{src:r("cf05"),alt:""}})])}],b=(r("96cf"),r("1da1")),h={data:function(){return{loginForm:{name:"root",pwd:"123456",perms:"user-add"},loginFormRules:{name:[{required:!0,message:"Please input username",trigger:"blur"},{min:3,max:10,message:"length between 3 to 10 chars",trigger:"blur"}],pwd:[{required:!0,message:"Please input password",trigger:"blur"},{min:3,max:20,message:"length between 3 to 20 chars",trigger:"blur"}]}}},methods:{resetLoginForm:function(){this.$refs.loginFormRef.resetFields()},login:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("user/login",e.loginForm);case 4:if(n=t.sent,n.data.token){t.next=7;break}return t.abrupt("return",e.$message.error("Fail to login"));case 7:e.$message.success("Successfully login"),console.log(n),n.data.token&&(window.sessionStorage.setItem("token",n.data.token),e.$router.push("/home"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},k=h,w=(r("1d83"),Object(u["a"])(k,g,f,!1,null,"210e4b38",null)),v=w.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"home-container"},[r("el-header",[r("div",[r("img",{attrs:{src:"",alt:"Binobooks logo"}}),r("span",[e._v("Binobooks Management System")])]),r("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("Log Out")])],1),r("el-container",[r("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[r("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),r("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409eff","unique-opened":"",collapse:e.isCollapse,"collapse-transition":!1,router:!0,"default-active":e.activePath}},[r("el-menu-item",{key:1,attrs:{index:"/goods"},on:{click:function(t){return e.saveNavState("/goods")}}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-menu"}),r("span",[e._v("Goods Management")])])],2),r("el-menu-item",{key:2,attrs:{index:"/category"},on:{click:function(t){return e.saveNavState("/category")}}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-menu"}),r("span",[e._v("Categories Management")])])],2),r("el-menu-item",{key:3,attrs:{index:"/elementCategory"},on:{click:function(t){return e.saveNavState("/elementCategory")}}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-menu"}),r("span",[e._v("Element Categories")])])],2)],1)],1),r("el-main",[r("router-view")],1)],1)],1)},x=[],_={data:function(){return{menuList:[],iconsObj:{125:"iconfont icon-user",103:"iconfont icon-cube",101:"iconfont icon-shangpingouwudai2",102:"iconfont icon-danju-tianchong",145:"iconfont icon-baobiao"},isCollapse:!1,activePath:""}},created:function(){this.activePath=window.sessionStorage.getItem("activePath")},methods:{logout:function(){window.sessionStorage.clear(),this.$router.push("/login")},toggleCollapse:function(){this.isCollapse=!this.isCollapse},saveNavState:function(e){window.sessionStorage.setItem("activePath",e),this.activePath=e}}},$=_,I=(r("1487"),Object(u["a"])($,y,x,!1,null,"f4072fd4",null)),F=I.exports,R=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},E=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",[e._v("Welcome")])])}],C={},O=Object(u["a"])(C,R,E,!1,null,null,null),L=O.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("Home")]),r("el-breadcrumb-item",{attrs:{to:{path:"/categories"}}},[e._v("Categories")])],1),r("el-card",[r("el-row",[r("el-col",[r("el-button",{attrs:{type:"primary"},on:{click:e.addCategory}},[e._v("ADD CATEGORY")])],1)],1),r("el-table",{attrs:{data:e.categoryList,border:"",stripe:""}},[r("el-table-column",{attrs:{prop:"category_id",label:"id",align:"center"}}),r("el-table-column",{attrs:{prop:"category_name",label:"name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{model:{value:t.row.category_name,callback:function(r){e.$set(t.row,"category_name",r)},expression:"scope.row.category_name"}})]}}])}),r("el-table-column",{attrs:{label:"Operation",width:"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:function(r){return e.handleSubmit(t)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.handleRemove(t)}}})]}}])})],1)],1)],1)},j=[],D=(r("a434"),{data:function(){return{queryInfo:{type:3,pagenum:1,pagesize:5},categoryList:[]}},created:function(){this.getCateList()},methods:{getCateList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("category/categories");case 2:if(r=t.sent,200===r.status){t.next=5;break}return t.abrupt("return",e.$message.error("Fail to get category information"));case 5:e.categoryList=r.data;case 6:case"end":return t.stop()}}),t)})))()},addCategory:function(){this.categoryList.push({category_id:"",category_name:""})},handleRemove:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("The opeartion will result in deletion of customizable image, are you sure you want to it?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.row.category_id,n){r.next=6;break}a=e.$index,t.categoryList.splice(a,1),r.next=13;break;case 6:return r.next=8,t.$http.delete("category/deleteById/"+n);case 8:if(o=r.sent,200===o.status){r.next=11;break}return r.abrupt("return",t.$message.error("Fail to delete the category"));case 11:t.getCateList(),t.$message.success("Successfully Deleted!");case 13:case"end":return r.stop()}}),r)})))).catch((function(){t.$message.info("Opeartion canceled!")}));case 1:case"end":return r.stop()}}),r)})))()},handleSubmit:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.row.category_id,n){r.next=11;break}return r.next=4,t.$http.post("category/save",e.row);case 4:if(a=r.sent,200===a.status){r.next=7;break}return r.abrupt("return",t.$message.error("Fail to create new category"));case 7:t.getCateList(),t.$message.success("Successfully Created!"),r.next=18;break;case 11:return r.next=13,t.$http.put("category/update",e.row);case 13:if(o=r.sent,200===o.status){r.next=16;break}return r.abrupt("return",t.$message.error("Fail to modify the category"));case 16:t.getCateList(),t.$message.success("Successfully Modified!");case 18:case"end":return r.stop()}}),r)})))()}}}),B=D,P=Object(u["a"])(B,S,j,!1,null,"8339cc4e",null),U=P.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:">"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("welcome")]),r("el-breadcrumb-item",[r("a",{attrs:{href:"/elementCategory"}},[e._v("Element Category")])])],1),r("el-card",[r("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.addBasicElementRow()}}},[e._v("Add a type")]),r("el-table",{attrs:{data:e.basicElementList,border:""}},[r("el-table-column",{attrs:{lable:"#",type:"index"}}),r("el-table-column",{attrs:{prop:"description",label:"description"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{model:{value:t.row.description,callback:function(r){e.$set(t.row,"description",r)},expression:"scope.row.description"}})]}}])}),r("el-table-column",{attrs:{label:"Operation",width:"170rpx",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-check",circle:""},on:{click:function(r){return e.handleElementUpload(t)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.handleElementDelete(t)}}})]}}])})],1)],1)],1)},N=[],q=(r("a4d3"),r("e01a"),{data:function(){return{basicElementList:[]}},created:function(){this.getBasicElement()},methods:{getBasicElement:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/imageBasicType/all");case 2:if(r=t.sent,200===r.status){t.next=5;break}return t.abrupt("return",e.$message.error("Fail to get user list"));case 5:console.log(r.data),e.basicElementList=r.data;case 7:case"end":return t.stop()}}),t)})))()},addBasicElementRow:function(){this.basicElementList.push({type_id:"",description:""})},handleElementUpload:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=!!e.row.type_id,a={type_id:e.row.type_id,description:e.row.description},n){r.next=10;break}return r.next=5,t.$http.post("/imageBasicType/save",a);case 5:if(o=r.sent,200===o.status){r.next=8;break}return r.abrupt("return",t.$message.error("Fail to save the type"));case 8:r.next=15;break;case 10:return r.next=12,t.$http.put("/imageBasicType/update",a);case 12:if(s=r.sent,200===s.status){r.next=15;break}return r.abrupt("return",t.$message.error("Fail to update type list"));case 15:t.getBasicElement();case 16:case"end":return r.stop()}}),r)})))()},handleElementDelete:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("The opeartion will result in deletion of customizable image, are you sure you want to it?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(b["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("/imageBasicType/deleteById/"+e.row.type_id);case 2:if(n=r.sent,200===n.status){r.next=5;break}return r.abrupt("return",t.$message.error("Fail to delete"));case 5:t.getBasicElement(),t.$message.success("Successfully delete it");case 7:case"end":return r.stop()}}),r)})))).catch((function(){t.$message.info("Opeartion canceled!")}));case 1:case"end":return r.stop()}}),r)})))()}}}),z=q,A=Object(u["a"])(z,T,N,!1,null,"3bb3a344",null),M=A.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:">"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("welcome")]),r("el-breadcrumb-item",[r("a",{attrs:{href:"/goods"}},[e._v("Goods")])])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:9}},[r("el-input",{attrs:{placeholder:"search by name..",clearable:""},on:{clear:e.getGoodsList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.findByName},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("Add Book")])],1)],1),r("el-table",{attrs:{data:e.goodsList,stripe:"",border:""}},[r("el-table-column",{attrs:{lable:"#",type:"index"}}),r("el-table-column",{attrs:{label:"Name",prop:"book_name"}}),r("el-table-column",{attrs:{label:"Category",prop:"book_category"}}),r("el-table-column",{attrs:{label:"Price",prop:"book_price"}}),r("el-table-column",{attrs:{label:"Operation",width:"250rpx"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row)}}}),r("el-tooltip",{attrs:{effect:"dark",content:"character setting",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"success",icon:"el-icon-user",size:"mini"},on:{click:function(r){return e.setCharacter(t.row)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"content setting",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.setContent(t.row)}}})],1),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeBookById(t)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[5,10,20,30],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"ADD A Book",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"book name",prop:"book_name"}},[r("el-input",{model:{value:e.addForm.book_name,callback:function(t){e.$set(e.addForm,"book_name",t)},expression:"addForm.book_name"}})],1),r("el-form-item",{attrs:{label:"category",prop:"book_category"}},[r("el-select",{attrs:{placeholder:"Select..."},model:{value:e.selectedNewBookCateId,callback:function(t){e.selectedNewBookCateId=t},expression:"selectedNewBookCateId"}},e._l(e.catesList,(function(e){return r("el-option",{key:e.category_id,attrs:{label:e.category_name,value:e.category_id}})})),1)],1),r("el-form-item",{attrs:{label:"price",prop:"book_price"}},[r("el-input",{model:{value:e.addForm.book_price,callback:function(t){e.$set(e.addForm,"book_price",t)},expression:"addForm.book_price"}})],1),r("el-form-item",{attrs:{label:"sale",prop:"sale"}},[r("el-switch",{model:{value:e.addForm.sale,callback:function(t){e.$set(e.addForm,"sale",t)},expression:"addForm.sale"}})],1),r("el-form-item",{attrs:{label:"Description",prop:"book_des"}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"Type description..."},model:{value:e.addForm.book_des,callback:function(t){e.$set(e.addForm,"book_des",t)},expression:"addForm.book_des"}})],1),r("el-form-item",{attrs:{label:"coverImg",prop:"coverImg"}},[r("el-upload",{class:{disabled:e.uploadDisabled},attrs:{action:"http://159.75.20.131:8888/up/files","list-type":"picture-card",data:{bucket:""+e.addForm.book_name,folder:"bookcover"},limit:1,"on-success":e.handleAddFormUploadSuccess,"on-remove":e.handleAddFormUploadRemove,"on-change":e.handleAddFormUploadChange}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("UPLOAD")])],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("CANCEL")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addBook}},[e._v("OK")])],1)],1),r("el-dialog",{attrs:{title:"Modify Book",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"book",prop:"book_name"}},[r("el-input",{model:{value:e.editForm.book_name,callback:function(t){e.$set(e.editForm,"book_name",t)},expression:"editForm.book_name"}})],1),r("el-form-item",{attrs:{label:"category",prop:"book_category"}},[r("el-select",{attrs:{placeholder:"Select..."},model:{value:e.selectedNewBookCateId,callback:function(t){e.selectedNewBookCateId=t},expression:"selectedNewBookCateId"}},e._l(e.catesList,(function(e){return r("el-option",{key:e.category_id,attrs:{label:e.category_name,value:e.category_id}})})),1)],1),r("el-form-item",{attrs:{label:"price",prop:"book_price"}},[r("el-input",{model:{value:e.editForm.book_price,callback:function(t){e.$set(e.editForm,"book_price",t)},expression:"editForm.book_price"}})],1),r("el-form-item",{attrs:{label:"sale",prop:"sale"}},[r("el-switch",{model:{value:e.editForm.sale,callback:function(t){e.$set(e.editForm,"sale",t)},expression:"editForm.sale"}})],1),r("el-form-item",[r("el-upload",{class:{disabled:e.uploadDisabled},attrs:{action:"http://159.75.20.131:8888/up/files","list-type":"picture-card",data:{bucket:""+e.editForm.book_name,folder:"bookcover"},limit:1,"file-list":e.uploadedList,"on-success":e.handleEditFormUploadSuccess,"on-change":e.handleEditFormUploadChange,"on-remove":e.handleEditFormUploadRemove}},[r("i",{staticClass:"el-icon-plus"})])],1),r("el-form-item",{attrs:{label:"Description",prop:"book_des"}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"Type description..."},model:{value:e.editForm.book_des,callback:function(t){e.$set(e.editForm,"book_des",t)},expression:"editForm.book_des"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("CANCEL")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editBookInfo}},[e._v("OK")])],1)],1)],1)},V=[],Y=(r("99af"),r("4160"),r("a15b"),r("ac1f"),r("1276"),r("159b"),{data:function(){return{queryInfo:{query:"",pageNum:1,pageSize:5},goodsList:[],catesList:[],total:0,addDialogVisible:!1,addForm:{book_name:"",book_category:0,book_price:"",book_des:"",sale:!0,url:""},addFormRules:{book_name:[{required:!0,message:"Username cannot be empty",trigger:"blur"}],book_price:[{required:!0,message:"Password cannot be empty",trigger:"blur"}]},textarea:"",selectedNewBookCateId:"",editDialogVisible:!1,editForm:{},editFormRules:{book_name:[{required:!0,message:"Username cannot be empty",trigger:"blur"}],book_price:[{required:!0,message:"Password cannot be empty",trigger:"blur"}]},uploadedList:[],uploadDisabled:!1}},created:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCatesList();case 2:e.getGoodsList();case 3:case"end":return t.stop()}}),t)})))()},methods:{getGoodsList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/book/findAll/".concat(e.queryInfo.pageNum,"/").concat(e.queryInfo.pageSize));case 2:if(r=t.sent,200===r.status){t.next=5;break}return t.abrupt("return",e.$message.error("Fail to get goods list"));case 5:e.goodsList=r.data.list,e.total=r.data.total,e.goodsList.forEach((function(t){t.book_category=e.getCateById(t.book_category)})),console.log(e.goodsList);case 9:case"end":return t.stop()}}),t)})))()},getCatesList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/category/categories");case 2:if(r=t.sent,200===r.status){t.next=5;break}return t.abrupt("return",e.$message.error("Fail to get category list"));case 5:e.catesList=r.data;case 6:case"end":return t.stop()}}),t)})))()},findByName:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.queryInfo.query,!r){t.next=12;break}return t.next=4,e.$http.get("/book/findByName/".concat(r));case 4:if(n=t.sent,200===n.status){t.next=7;break}return t.abrupt("return",e.$message.error("Fail to get goods list"));case 7:console.log(n.data),e.goodsList=n.data,e.goodsList.forEach((function(t){t.book_category=e.getCateById(t.book_category)})),t.next=13;break;case 12:e.getGoodsList();case 13:case"end":return t.stop()}}),t)})))()},getCateById:function(e){var t;return this.catesList.forEach((function(r){r.category_id===e&&(t=r.category_name)})),t},DeletImgFromMinio:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.url,a=n.split("/").splice(3),o=a[0],a=a.splice(1),s=a.join("/"),i={bucketName:o,fileName:s},r.next=8,t.$http.post("/up/deleteFile",i);case 8:if(l=r.sent,200===l.status){r.next=11;break}return r.abrupt("return",t.$message.error("Fail to delete the image"));case 11:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getGoodsList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getGoodsList()},bookStateChanged:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,t.$http.put("/book/changeState/"+e.book_id);case 3:r.sent;case 4:case"end":return r.stop()}}),r)})))()},addBook:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return e.addForm.book_category=e.selectedNewBookCateId,t.next=5,e.$http.post("/book/save",e.addForm);case 5:if(n=t.sent,200===n.status){t.next=8;break}return t.abrupt("return",e.$message.error("Fail to add the book"));case 8:e.$message.success("Successfully add the book"),e.addDialogVisible=!1,e.getGoodsList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},removeBookById:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("The opeartion will delete all element in the book as well, are you sure you want to it?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.$index,t.goodsList.splice(n,1),r.next=4,t.$http.delete("book/deleteById/"+e.row.book_id);case 4:return a=r.sent,r.next=7,t.$http.delete("up/deleteBucket/"+e.row.book_name);case 7:if(o=r.sent,200===a.status&&200===o.status){r.next=10;break}return r.abrupt("return",t.$message.error("Fail to delete the book"));case 10:t.getGoodsList(),t.$message.success("Successfully Deleted!");case 12:case"end":return r.stop()}}),r)})))).catch((function(){t.$message.info("Opeartion canceled!")}));case 1:case"end":return r.stop()}}),r)})))()},addDialogClosed:function(){this.$refs.addFormRef.resetFields(),this.selectedNewBookCateId=""},handleAddFormUploadSuccess:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.addForm.url=e;case 1:case"end":return r.stop()}}),r)})))()},handleAddFormUploadRemove:function(e,t){var r=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.DeletImgFromMinio(r.addForm),r.addForm.url="",r.uploadDisabled=!1;case 3:case"end":return e.stop()}}),e)})))()},handleAddFormUploadChange:function(e,t){var r=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.length>=1&&(r.uploadDisabled=!0);case 1:case"end":return e.stop()}}),e)})))()},showEditDialog:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/book/findById/"+e.book_id);case 3:if(n=r.sent,200===n.status){r.next=6;break}return r.abrupt("return",t.$message.error("Fail to get selected book information"));case 6:t.editForm=n.data,t.selectedNewBookCateId=n.data.book_category,n.data.url&&(a={url:n.data.url},t.uploadedList.push(a),t.uploadDisabled=!0);case 9:case"end":return r.stop()}}),r)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields(),this.uploadedList.pop(),this.uploadDisabled=!1},editBookInfo:function(){var e=this;this.editForm.book_category=this.selectedNewBookCateId,this.$refs.editFormRef.validate(function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("/book/update",e.editForm);case 4:if(n=t.sent,200===n.status){t.next=7;break}return t.abrupt("return",e.$message.error("Fail to modify the book"));case 7:e.$message.success("Successfully modify the book"),e.editDialogVisible=!1,e.getGoodsList();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleEditFormUploadRemove:function(e,t){var r=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("are you sure you want to delte this file"),r.DeletImgFromMinio(r.editForm),r.editForm.url="",r.uploadDisabled=!1;case 4:case"end":return e.stop()}}),e)})))()},handleEditFormUploadSuccess:function(e){this.editForm.url=e},handleEditFormUploadChange:function(e,t){t.length>=1&&(this.uploadDisabled=!0)},setContent:function(e){this.$router.push({path:"/goodContent",query:{id:e.book_id,name:e.book_name}})},setCharacter:function(e){this.$router.push({path:"/character",query:{id:e.book_id,name:e.book_name}})}}}),X=Y,W=(r("e9f3"),Object(u["a"])(X,G,V,!1,null,null,null)),K=W.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:">"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("welcome")]),r("el-breadcrumb-item",{attrs:{to:{path:"/goods"}}},[e._v("Goods")]),r("el-breadcrumb-item",{attrs:{to:{path:"/goodContent"}}},[e._v("Content")])],1),r("el-card",[r("h2",[e._v(e._s(e.bookInfo.name))]),r("el-button",{attrs:{type:"success",round:""},on:{click:function(t){return e.addPageRow()}}},[e._v("Add a Page")]),r("el-table",{attrs:{data:e.pageList,stripe:"",border:"","row-key":e.getRowKeys,"expand-row-keys":e.expands},on:{"expand-change":e.expandSelect}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",round:""},on:{click:function(r){return e.addElementRow(t)}}},[e._v("Add a Element")]),r("el-table",{ref:"elementTable",attrs:{data:e.elementList,stripe:"",border:""}},[r("el-table-column",{attrs:{lable:"#",type:"index"}}),r("el-table-column",{attrs:{label:"Category",prop:"category",width:"150rpx"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-cascader",{attrs:{options:e.options,"show-all-levels":!1},on:{change:function(r){return e.handleTypeSelected(t)}},model:{value:t.row.category,callback:function(r){e.$set(t.row,"category",r)},expression:"scope.row.category"}})]}}],null,!0)}),r("el-table-column",{attrs:{label:"Text",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{type:"textarea",disabled:"2"==t.row.category[0],rows:2,placeholder:t.row.promptText},model:{value:t.row.text,callback:function(r){e.$set(t.row,"text",r)},expression:"scope.row.text"}})]}}],null,!0)}),r("el-table-column",{attrs:{label:"Upload",width:"170rpx",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-upload",{class:{disabled:t.row.uploadElementImgDisabled},attrs:{action:"http://159.75.20.131:8888/up/files","list-type":"picture-card",data:{bucket:""+e.bookInfo.name,folder:"page"+e.currentPageId+"/elements"},limit:1,"file-list":t.row.upload,"on-remove":function(r,n){return e.handleElementImgUploadRemove(r,n,t)},"on-success":function(r){return e.handleElementImgUploadSuccess(r,t)},"on-change":function(r,n){return e.handleElementImgUploadChange(r,n,t)}}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("Upload")])],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"Position",width:"150rpx"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"X coordinate"},model:{value:t.row.positionX,callback:function(r){e.$set(t.row,"positionX",r)},expression:"scope.row.positionX"}}),r("el-input",{attrs:{placeholder:"Y coordinate"},model:{value:t.row.positionY,callback:function(r){e.$set(t.row,"positionY",r)},expression:"scope.row.positionY"}})]}}],null,!0)}),r("el-table-column",{attrs:{label:"Operation",width:"170rpx",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-check",circle:""},on:{click:function(r){return e.handleElementUpload(t)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.handleElementDelete(t)}}})]}}],null,!0)})],1)]}}])}),r("el-table-column",{attrs:{lable:"#",type:"index"}}),r("el-table-column",{attrs:{label:"Page id",prop:"pageId"}}),r("el-table-column",{attrs:{label:"Page Image",prop:"url"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-upload",{class:{disabled:t.row.uploadPageImgDisabled},attrs:{action:"http://159.75.20.131:8888/up/files","list-type":"picture-card",limit:1,data:{bucket:""+e.bookInfo.name,folder:"pagecover"},"file-list":t.row.image,"on-remove":function(r,n){return e.handlePageImgUploadRemove(r,n,t)},"on-success":function(r){return e.handlePageImgUploadSuccess(r,t)},"on-change":function(r,n){return e.handlePageImgUploadChange(r,n,t)}}},[r("i",{staticClass:"el-icon-plus"})])]}}])}),r("el-table-column",{attrs:{label:"Operation",width:"100rpx",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.handleDeletePage(t)}}})]}}])})],1)],1)],1)},H=[],Q=(r("b0c0"),{data:function(){return{bookInfo:{},pageList:[],elementList:[],options:[{value:"1",label:"Text"},{value:"2",label:"Image",children:[]}],expands:[],currentPageId:"",currentPageIndex:""}},created:function(){this.getParams(),this.getPages(),this.getCharacters()},methods:{getParams:function(){this.bookInfo=this.$route.query},getPages:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.pageList=[],t.next=3,e.$http.get("/page/pages/"+e.bookInfo.id);case 3:if(r=t.sent,200===r.status){t.next=6;break}return t.abrupt("return",e.$message.error("Fail to get pages"));case 6:r.data.forEach((function(t){var r=t.url?[{url:t.url}]:[],n=!!t.url;e.pageList.push({image:r,uploadPageImgDisabled:n,pageId:t.page_id})}));case 7:case"end":return t.stop()}}),t)})))()},getCharacters:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/character/bookId/"+e.bookInfo.id);case 2:if(r=t.sent,200===r.status){t.next=5;break}return t.abrupt("return",e.$message.error("Fail to get character list"));case 5:r.data.forEach((function(t){e.options[1].children.push({value:t.characters_id,label:t.description})}));case 6:case"end":return t.stop()}}),t)})))()},deleteImgFromMinio:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.split("/").splice(3),a=n[0],n=n.splice(1),o=n.join("/"),s={bucketName:a,fileName:o},r.next=7,t.$http.post("/up/deleteFile",s);case 7:if(i=r.sent,200===i.status){r.next=10;break}return r.abrupt("return",t.$message.error("Fail to delete the image"));case 10:case"end":return r.stop()}}),r)})))()},addPageRow:function(){this.pageList.push({pageId:"",image:[],uploadPageImgDisabled:!1})},addElementRow:function(e){var t=e.row.pageId;this.currentPageIndex=e.$index+1,t?this.elementList.push({id:"",category:"",text:"",promptText:"",upload:[],positionX:"",positionY:"",uploadElementImgDisabled:!1}):this.$message.warning("Please Create a Page First!")},getRowKeys:function(e){return e.pageId},expandSelect:function(e,t){var r=this;t.length?(r.expands=[],e&&(this.getElements(e.pageId),r.expands.push(e.pageId),this.currentPageId=e.pageId)):(r.expands=[],r.elementList=[])},handlePageImgUploadChange:function(e,t,r){t.length>=1&&(r.row.uploadPageImgDisabled=!0)},handlePageImgUploadSuccess:function(e,t){var r=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){var a,o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("look at there"),console.log(t.$index),a=t.row.pageId,t.row.image.push({url:e}),o={book_id:r.bookInfo.id,url:e,page_id:a},console.log(o),a){n.next=16;break}return console.log("page does not exist"),n.next=10,r.$http.post("/page/save",o);case 10:if(s=n.sent,200===s.status){n.next=13;break}return n.abrupt("return",r.$message.error("Fail to add the page"));case 13:r.$message.success("Successfully created!"),n.next=23;break;case 16:return console.log("page already exist"),n.next=19,r.$http.put("/page/update",o);case 19:if(i=n.sent,200===i.status){n.next=22;break}return n.abrupt("return",r.$message.error("Fail to update the element"));case 22:r.$message.success("Edit it successfully!");case 23:r.getPages();case 24:case"end":return n.stop()}}),n)})))()},handlePageImgUploadRemove:function(e,t,r){var n=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var t,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.row.pageId,r.row.uploadPageImgDisabled=!1,r.row.image.length&&n.deleteImgFromMinio(r.row.image[0].url),!t){e.next=10;break}return a={page_id:r.row.pageId,book_id:n.bookInfo.id,url:""},e.next=7,n.$http.put("/page/update",a);case 7:if(o=e.sent,200===o.status){e.next=10;break}return e.abrupt("return",n.$message.error("Fail to delete the file"));case 10:r.row.image=[];case 11:case"end":return e.stop()}}),e)})))()},handleDeletePage:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("The opeartion will delete all element in the page as well, are you sure you want to it?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.row.pageId,e.row.image.length,a=e.$index,t.pageList.splice(a,1),o=t.bookInfo.name,s="page"+t.currentPageId,i={bucketName:o,fileName:s},r.next=9,t.$http.post("/up/deleteFiles",i);case 9:if(r.sent,!n){r.next=16;break}return r.next=13,t.$http.delete("/page/deleteById/"+n);case 13:if(l=r.sent,200===l.status){r.next=16;break}return r.abrupt("return",t.$message.error("Fail to delete the page"));case 16:t.$message.success("Successfully deleted!");case 17:case"end":return r.stop()}}),r)})))).catch((function(){t.$message.info("Opeartion canceled!")}));case 1:case"end":return r.stop()}}),r)})))()},getImgElements:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("/image/images/"+e);case 2:if(n=r.sent,200===n.status){r.next=5;break}return r.abrupt("return",t.$message.error("Fail to get the image element information"));case 5:n.data.forEach((function(e){var r=e.url?[{url:e.url}]:[],n=!!e.url;t.elementList.push({id:e.img_id,category:["2",e.image_type],text:e.description,upload:r,positionX:e.position_x,positionY:e.position_y,uploadElementImgDisabled:n})}));case 6:case"end":return r.stop()}}),r)})))()},getTextElements:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("/text/texts/"+e);case 2:n=r.sent,n.data.forEach((function(e){t.elementList.push({id:e.text_id,category:"1",text:e.text,upload:[],positionX:e.position_x,positionY:e.position_y,uploadElementImgDisabled:!0})}));case 4:case"end":return r.stop()}}),r)})))()},getElements:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.elementList=[],r.next=3,t.getImgElements(e);case 3:return r.next=5,t.getTextElements(e);case 5:case"end":return r.stop()}}),r)})))()},handleTypeSelected:function(e){var t=e.row.category[0],r=e.row.upload.length;e.row.id;e.row.promptText="1"==t?"Type text here...realPlaceholder for placeholder":"Enter the description here...",e.row.uploadElementImgDisabled="1"==t||!!r,r&&"1"==t&&(this.deleteImgFromMinio(e.row.upload[0].url),e.row.upload=[])},handleElementImgUploadRemove:function(e,t,r){var n=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var t,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.row,a=t.id,r.row.uploadElementImgDisabled=!1,n.deleteImgFromMinio(t.upload[0].url),r.row.upload=[],n.$message.success("Successfully delete it!"),!a){e.next=13;break}return o={img_id:t.id,page_id:n.currentPageId,url:"",description:t.text,position_x:t.positionX,position_y:t.positionY,image_type:t.category[1]},e.next=10,n.$http.put("/image/update",o);case 10:if(s=e.sent,200===s.status){e.next=13;break}return e.abrupt("return",n.$message.error("Fail to update the element"));case 13:case"end":return e.stop()}}),e)})))()},handleElementImgUploadSuccess:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.row.upload.push({url:e});case 1:case"end":return r.stop()}}),r)})))()},handleElementImgUploadChange:function(e,t,r){t.length>=1&&(r.row.uploadElementImgDisabled=!0)},handleElementUpload:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,l,c,u,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.row.id,a=e.row.upload.length,o=e.row,s={},a&&(s={img_id:o.id,page_id:t.currentPageId,url:o.upload[0].url,description:o.text,position_x:o.positionX,position_y:o.positionY,image_type:o.category[1]}),i={text_id:o.id,page_id:t.currentPageId,text:o.text,position_x:o.positionX,position_y:o.positionY},l="1"==o.category[0]?i:s,c="1"==o.category[0]?"/text":"/image",n){r.next=18;break}return r.next=11,t.$http.post("".concat(c,"/save"),l);case 11:if(u=r.sent,200===u.status){r.next=14;break}return r.abrupt("return",t.$message.error("Fail to add the element"));case 14:t.$message.success("Save it successfully!"),console.log(i),r.next=25;break;case 18:return console.log("update element"),r.next=21,t.$http.put("".concat(c,"/update"),l);case 21:if(d=r.sent,200===d.status){r.next=24;break}return r.abrupt("return",t.$message.error("Fail to update the element"));case 24:t.$message.success("Edit it successfully!");case 25:t.getElements(t.currentPageId);case 26:case"end":return r.stop()}}),r)})))()},handleElementDelete:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.row.id,a=e.row.upload.length,o="1"==e.row.category[0],s=e.$index,t.elementList.splice(s,1),!a){r.next=8;break}return r.next=8,t.handleElementImgUploadRemove("","",e);case 8:if(!n||o){r.next=14;break}return r.next=11,t.$http.delete("/image/deleteById/"+n);case 11:if(i=r.sent,200===i.status){r.next=14;break}return r.abrupt("return",t.$message.error("Fail to delete the element"));case 14:if(!n||!o){r.next=21;break}return r.next=17,t.$http.delete("/text/deleteById/"+n);case 17:if(l=r.sent,200===l.status){r.next=20;break}return r.abrupt("return",t.$message.error("Fail to delete the element"));case 20:t.$message.success("Successfully delete the element");case 21:case"end":return r.stop()}}),r)})))()}}}),Z=Q,ee=(r("4661"),Object(u["a"])(Z,J,H,!1,null,null,null)),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:">"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("welcome")]),r("el-breadcrumb-item",{attrs:{to:{path:"/goods"}}},[e._v("Goods")]),r("el-breadcrumb-item",[r("a",{attrs:{href:"/Character"}},[e._v("Character")])])],1),r("el-card",[r("el-button",{attrs:{type:"success",round:""},on:{click:function(t){return e.addElementRow()}}},[e._v("Add a element")]),r("el-table",{attrs:{data:e.elementList,border:""}},[r("el-table-column",{attrs:{lable:"#",type:"index"}}),r("el-table-column",{attrs:{prop:"elementId",label:"Basic Type"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{placeholder:"--choose--"},model:{value:t.row.basicId,callback:function(r){e.$set(t.row,"basicId",r)},expression:"scope.row.basicId"}},e._l(e.basicElementList,(function(e){return r("el-option",{key:e.type_id,attrs:{label:e.description,value:e.type_id}})})),1)]}}])}),r("el-table-column",{attrs:{prop:"description",label:"description"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:""},model:{value:t.row.description,callback:function(r){e.$set(t.row,"description",r)},expression:"scope.row.description"}})]}}])}),r("el-table-column",{attrs:{prop:"url",label:"upload"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-upload",{class:{disabled:t.row.uploadElementImgDisabled},attrs:{action:"http://159.75.20.131:8888/up/files","list-type":"picture-card",data:{bucket:""+e.bookInfo.name,folder:"characters"},limit:1,"file-list":t.row.upload,"on-remove":function(r,n){return e.handleElementImgUploadRemove(r,n,t)},"on-success":function(r){return e.handleElementImgUploadSuccess(r,t)},"on-change":function(r,n){return e.handleElementImgUploadChange(r,n,t)}}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("Upload")])],1)]}}])}),r("el-table-column",{attrs:{label:"Operation",width:"170rpx",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-check",circle:""},on:{click:function(r){return e.handleElementUpload(t)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.handleElementDelete(t)}}})]}}])})],1)],1)],1)},ne=[],ae={data:function(){return{bookInfo:{},elementList:[],basicElementList:[]}},created:function(){this.getParams(),this.getBasicElement(),this.getElements()},methods:{getBasicElement:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/imageBasicType/all");case 2:if(r=t.sent,200===r.status){t.next=5;break}return t.abrupt("return",e.$message.error("Fail to get user list"));case 5:e.basicElementList=r.data;case 6:case"end":return t.stop()}}),t)})))()},getElements:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.elementList=[],t.next=3,e.$http.get("/character/bookId/"+e.bookInfo.id);case 3:if(r=t.sent,200===r.status){t.next=6;break}return t.abrupt("return",e.$message.error("Fail to get character list"));case 6:r.data.forEach((function(t){var r=t.url?[{url:t.url}]:[],n=!!t.url;e.elementList.push({elementId:t.characters_id,basicId:t.basic_id,bookId:t.book_id,upload:r,description:t.description,uploadElementImgDisabled:n})}));case 7:case"end":return t.stop()}}),t)})))()},getParams:function(){this.bookInfo=this.$route.query},addElementRow:function(){this.elementList.push({elementId:"",basicId:"",bookId:this.bookInfo.id,upload:[],description:"",uploadPageImgDisabled:!1}),console.log(this.elementList)},deleteImgFromMinio:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.split("/").splice(3),a=n[0],n=n.splice(1),o=n.join("/"),s={bucketName:a,fileName:o},r.next=7,t.$http.post("/up/deleteFile",s);case 7:if(i=r.sent,200===i.status){r.next=10;break}return r.abrupt("return",t.$message.error("Fail to delete the image"));case 10:case"end":return r.stop()}}),r)})))()},handleElementImgUploadRemove:function(e,t,r){var n=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var t,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.row,a=t.elementId,r.row.uploadElementImgDisabled=!1,n.deleteImgFromMinio(t.upload[0].url),r.row.upload=[],n.$message.success("Successfully delete it!"),!a){e.next=13;break}return o={book_id:n.bookInfo.id,characters_id:t.elementId,basic_id:t.basicId,url:"",description:t.description},e.next=10,n.$http.put("/character/update",o);case 10:if(s=e.sent,200===s.status){e.next=13;break}return e.abrupt("return",n.$message.error("Fail to update the element"));case 13:case"end":return e.stop()}}),e)})))()},handleElementImgUploadSuccess:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.row.upload.push({url:e});case 1:case"end":return r.stop()}}),r)})))()},handleElementImgUploadChange:function(e,t,r){t.length>=1&&(r.row.uploadElementImgDisabled=!0)},handleElementUpload:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.row.elementId,console.log(e.row),a=e.row,o={characters_id:a.elementId,basic_id:a.basicId,book_id:t.bookInfo.id,description:a.description,url:a.upload[0].url},n){r.next=13;break}return r.next=7,t.$http.post("character/save",o);case 7:if(s=r.sent,200===s.status){r.next=10;break}return r.abrupt("return",t.$message.error("Fail to add the element"));case 10:t.$message.success("Save it successfully!"),r.next=20;break;case 13:return r.next=15,t.$http.put("character/update",o);case 15:if(i=r.sent,200===i.status){r.next=18;break}return r.abrupt("return",t.$message.error("Fail to update the element"));case 18:t.$message.success("Edit it successfully!"),console.log(o);case 20:t.getElements();case 21:case"end":return r.stop()}}),r)})))()},handleElementDelete:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.row.elementId,a=e.row.upload.length,o=e.$index,t.elementList.splice(o,1),!a){r.next=7;break}return r.next=7,t.handleElementImgUploadRemove("","",e);case 7:if(!n){r.next=13;break}return r.next=10,t.$http.delete("/character/deleteById/"+n);case 10:if(s=r.sent,200===s.status){r.next=13;break}return r.abrupt("return",t.$message.error("Fail to delete the element"));case 13:t.getElements();case 14:case"end":return r.stop()}}),r)})))()}}},oe=ae,se=(r("0cb8"),Object(u["a"])(oe,re,ne,!1,null,null,null)),ie=se.exports;o["default"].use(m["a"]);var le=[{path:"/",redirect:"/login"},{path:"/login",component:v},{path:"/home",component:F,redirect:"/welcome",children:[{path:"/welcome",component:L},{path:"/category",component:U},{path:"/elementCategory",component:M},{path:"/goods",component:K},{path:"/goodContent",name:"goodContent",component:te},{path:"/character",name:"character",component:ie}]}],ce=new m["a"]({routes:le});ce.beforeEach((function(e,t,r){if("/login"===e.path)return r();var n=window.sessionStorage.getItem("token");if(!n)return r("/login");r()}));var ue=ce,de=(r("9e1f"),r("6ed5")),pe=r.n(de),me=(r("0fb7"),r("f529")),ge=r.n(me),fe=(r("b0ee"),r("d180")),be=r.n(fe),he=(r("a335"),r("c0bb")),ke=r.n(he),we=(r("28b2"),r("c7ad")),ve=r.n(we),ye=(r("fe07"),r("6ac5")),xe=r.n(ye),_e=(r("b5d8"),r("f494")),$e=r.n(_e),Ie=(r("f225"),r("89a9")),Fe=r.n(Ie),Re=(r("6611"),r("e772")),Ee=r.n(Re),Ce=(r("1f1a"),r("4e4b")),Oe=r.n(Ce),Le=(r("5e32"),r("6721")),Se=r.n(Le),je=(r("cbb5"),r("8bbc")),De=r.n(je),Be=(r("a7cc"),r("df33")),Pe=r.n(Be),Ue=(r("672e"),r("101e")),Te=r.n(Ue),Ne=(r("0c67"),r("299c")),qe=r.n(Ne),ze=(r("e960"),r("b35b")),Ae=r.n(ze),Me=(r("5466"),r("ecdf")),Ge=r.n(Me),Ve=(r("38a0"),r("ad41")),Ye=r.n(Ve),Xe=(r("f4f9"),r("c2cc")),We=r.n(Xe),Ke=(r("7a0f"),r("0f6c")),Je=r.n(Ke),He=(r("b8e0"),r("a4c4")),Qe=r.n(He),Ze=(r("b84d"),r("c216")),et=r.n(Ze),tt=(r("8f24"),r("76b9")),rt=r.n(tt),nt=(r("8bd8"),r("4cb2")),at=r.n(nt),ot=(r("34db"),r("3803")),st=r.n(ot),it=(r("ce18"),r("f58e")),lt=r.n(it),ct=(r("4ca3"),r("443e")),ut=r.n(ct),dt=(r("de31"),r("c69e")),pt=r.n(dt),mt=(r("a769"),r("5cc3")),gt=r.n(mt),ft=(r("a673"),r("7b31")),bt=r.n(ft),ht=(r("adec"),r("3d2d")),kt=r.n(ht),wt=(r("10cb"),r("f3ad")),vt=r.n(wt),yt=(r("eca7"),r("3787")),xt=r.n(yt),_t=(r("425f"),r("4105")),$t=r.n(_t),It=(r("1951"),r("eedf")),Ft=r.n(It),Rt=r("b2d6"),Et=r.n(Rt),Ct=r("4897"),Ot=r.n(Ct);Ot.a.use(Et.a),o["default"].use(Ft.a),o["default"].use($t.a),o["default"].use(xt.a),o["default"].use(vt.a),o["default"].use(kt.a),o["default"].use(bt.a),o["default"].use(gt.a),o["default"].use(pt.a),o["default"].use(ut.a),o["default"].use(lt.a),o["default"].use(st.a),o["default"].use(at.a),o["default"].use(rt.a),o["default"].use(et.a),o["default"].use(Qe.a),o["default"].use(Je.a),o["default"].use(We.a),o["default"].use(Ye.a),o["default"].use(Ge.a),o["default"].use(Ae.a),o["default"].use(qe.a),o["default"].use(Te.a),o["default"].use(Pe.a),o["default"].use(De.a),o["default"].use(Se.a),o["default"].use(Oe.a),o["default"].use(Ee.a),o["default"].use(Fe.a),o["default"].use($e.a),o["default"].use(xe.a),o["default"].use(ve.a),o["default"].use(ke.a),o["default"].use(be.a),o["default"].prototype.$message=ge.a,o["default"].prototype.$confirm=pe.a.confirm;r("aede"),r("82da");var Lt,St=r("bc3a"),jt=r.n(St);function Dt(){Lt=a.a.service({lock:!0,text:"Loading Data...",background:"rgba(0, 0, 0, 0.7)"})}function Bt(){Lt.close()}jt.a.defaults.baseURL="http://159.75.20.131:8888",o["default"].use(a.a),o["default"].prototype.$http=jt.a,o["default"].config.productionTip=!1,jt.a.interceptors.request.use((function(e){Dt();var t=window.sessionStorage.getItem("token");return t&&(e.headers["token"]=t),e}),(function(e){return Promise.reject(e)})),jt.a.interceptors.response.use((function(e){return Bt(),e}),(function(e){return Promise.reject(e)})),new o["default"]({router:ue,render:function(e){return e(p)}}).$mount("#app")},"7f66":function(e,t,r){},"82da":function(e,t,r){},"96e2":function(e,t,r){},aede:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"static/img/logo.82b9c7a5.png"},d260:function(e,t,r){},e9f3:function(e,t,r){"use strict";r("0d87")}});
//# sourceMappingURL=app.1227245b.js.map